# -*- coding: utf-8 -*-
"""
使用说明文本模块：包含各功能模块的详细使用指南。
"""

HELP_TEXTS = {
    "视频压制": """
【视频压制】功能用于视频转码、压缩和字幕烧录。

📌 基本使用:
1. 选择输入视频文件
2. 选择质量预设 (推荐使用"标准推荐"预设)
3. 可选：添加字幕文件进行烧录
4. 点击"开始"按钮

📌 预设说明:
• 【标准推荐】: 适合 B 站投稿，1080P/CRF20，画质与大小均衡
• 【极致画质】: 高码率慢速编码，适合 AMV 或对画质要求极高的作品
• 【速度优先】: 使用 NVIDIA 显卡加速，适合赶稿
• 【自定义】: 手动配置所有参数

📌 高级参数说明:
• CRF: 质量控制，0-51，数值越低画质越好，推荐 18-23
• 编码速度: 越慢压缩效率越高，画质越好

⚠️ 注意事项:
• 如需直接复制流不重编码，请使用"封装转换"功能
• 字幕烧录需要重新编码，无法使用 copy 模式
""",
    
    "音频替换": """
【音频替换】功能用于替换视频中的音轨。

📌 基本使用:
1. 选择原始视频文件
2. 选择新的音频文件
3. 选择音频编码器和码率
4. 点击"开始"按钮

📌 适用场景:
• 替换 BGM
• 修复音频问题
• 添加配音/解说

⚠️ 注意事项:
• 视频流会自动复制，不会重新编码
• 新音频时长建议与视频一致
""",
    
    "封装转换": """
【封装转换】功能用于更换容器格式，不重新编码。

📌 基本使用:
1. 选择输入文件
2. 选择目标封装格式预设
3. 点击"开始"按钮

📌 预设说明:
• MP4: 最广泛兼容，适合大多数播放器
• MKV: 支持多音轨多字幕，适合存档
• MOV: 适合 Apple 生态和 Final Cut Pro
• TS: 广播级传输流格式
• WEBM: 适合网页播放
• MXF: 专业后期工作流

⚠️ 注意事项:
• 此功能不重新编码，速度极快
• 某些编码可能不兼容某些容器 (如 HEVC 转 AVI)
""",
    
    "质量检测": """
【质量检测 (QC)】功能用于批量检测素材兼容性。

📌 基本使用:
1. 选择要扫描的目录
2. 设置检测阈值 (可选)
3. 开启兼容性检测选项
4. 点击"开始"按钮

📌 检测内容:
• 码率范围检测
• 分辨率范围检测
• PR 视频兼容性 (MKV/VFR/VP9 等)
• PR 图片兼容性 (WEBP 等)

📌 自定义规则:
可以通过逗号分隔的格式自定义不兼容列表:
• 容器: mkv,webm,flv
• 编码: vp9,av1,theora
• 图片: webp,jxl

📌 报告输出:
扫描完成后会生成 TXT 格式的报告，包含所有问题文件的详细信息。
""",
    
    "音频抽取": """
【音频抽取】功能用于从视频中提取音频轨道。

📌 基本使用:
1. 选择输入视频
2. 选择音频编码器
3. 点击"开始"按钮

📌 编码器说明:
• AAC: 推荐，兼容性好
• MP3: 通用格式
• WAV: 无损但文件大
• FLAC: 无损压缩
• 复制: 直接提取原始音频，不转码

⚠️ 选择"复制"可以无损提取，但输出格式取决于原始音频编码。
""",
    
    "通知设置": """
【通知设置】功能用于配置任务完成后的自动通知。

📌 基本使用:
1. 配置飞书或自定义 Webhook
2. 勾选"启用自动通知"
3. 之后执行其他任务完成时会自动发送通知

📌 飞书通知:
1. 在飞书群中添加自定义机器人
2. 复制 Webhook URL 粘贴到设置中
3. 填写标题和内容
4. 选择卡片颜色

📌 自定义 Webhook:
支持发送任意 POST 请求:
• URL: Webhook 地址
• Headers: JSON 格式请求头
• Body: JSON 格式请求体

📌 测试通知:
配置完成后可点击"开始"按钮测试通知是否正常发送。
""",
    
    "常见问题": """
【常见问题 FAQ】

❓ Q: 找不到 FFmpeg？
   A: 工具会按以下顺序查找 FFmpeg:
      1. 程序目录/bin
      2. 系统 PATH 环境变量
      请确保 FFmpeg 已正确安装。

❓ Q: 压制后文件比原来还大？
   A: 可能原视频码率较低。尝试:
      • 提高 CRF 值 (如 23-28)
      • 降低分辨率

❓ Q: PR 导入视频有问题？
   A: 使用"质量检测"功能检测兼容性，
      然后用"封装转换"转为 MP4 格式。

❓ Q: 字幕没有出现？
   A: 确保:
      • 字幕文件路径不含特殊字符
      • 字幕编码是 UTF-8
      • 没有选择"复制"模式

❓ Q: NVIDIA 加速不生效？
   A: 请确保:
      • 安装了最新显卡驱动
      • 显卡支持 NVENC
      • FFmpeg 编译时包含 NVENC 支持

❓ Q: 任务完成后没收到通知？
   A: 请确保:
      • 在"通知设置"中勾选了"启用自动通知"
      • Webhook URL 配置正确
      • 网络连接正常
""",
}


def get_help_text(topic: str) -> str:
    """
    获取指定功能的使用说明文本。
    
    Args:
        topic: 功能名称
        
    Returns:
        使用说明文本
    """
    return HELP_TEXTS.get(topic, "暂无此功能的说明。")
